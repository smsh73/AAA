# 코드 정합성 분석 및 추가 개발 계획

## 1. 전체 시스템 분석 결과

### 1.1 백엔드 API 엔드포인트 현황

#### ✅ 구현 완료된 API

**Health**
- `GET /api/health` - 헬스 체크

**Analysts (애널리스트)**
- `GET /api/analysts` - 목록 조회
- `GET /api/analysts/{id}` - 상세 조회
- `POST /api/analysts` - 생성
- `POST /api/analysts/bulk-import` - 일괄 등록

**Reports (리포트)**
- `POST /api/reports/upload` - 업로드
- `GET /api/reports/{id}/extraction-status` - 추출 상태
- `GET /api/reports/{id}/predictions` - 예측 정보

**Companies (기업)**
- `GET /api/companies` - 목록 조회
- `GET /api/companies/{id}` - 상세 조회

**Evaluations (평가)**
- `POST /api/evaluations/start` - 평가 시작

**Scorecards (스코어카드)**
- `GET /api/scorecards` - 목록 조회

**Awards (어워즈)**
- `GET /api/awards` - 목록 조회
- `POST /api/awards/run` - 어워즈 선정 실행

**Data Collection (데이터 수집)**
- `POST /api/data-collection/start` - 수집 시작
- `GET /api/data-collection/{id}/status` - 수집 상태

**Evaluation Reports (평가 보고서)**
- `POST /api/evaluation-reports/generate` - 보고서 생성
- `GET /api/evaluation-reports/{id}` - 보고서 조회

#### ❌ 누락된 API

1. **Reports**
   - `GET /api/reports` - 리포트 목록 조회
   - `GET /api/reports/{id}` - 리포트 상세 조회
   - `DELETE /api/reports/{id}` - 리포트 삭제

2. **Evaluations**
   - `GET /api/evaluations` - 평가 목록 조회
   - `GET /api/evaluations/{id}` - 평가 상세 조회
   - `GET /api/evaluations/{id}/scores` - 평가 점수 조회

3. **Scorecards**
   - `GET /api/scorecards/{id}` - 스코어카드 상세 조회
   - `GET /api/scorecards/ranking` - 랭킹 조회

4. **Analysts**
   - `PUT /api/analysts/{id}` - 애널리스트 수정
   - `DELETE /api/analysts/{id}` - 애널리스트 삭제

5. **Dashboard/Statistics**
   - `GET /api/dashboard/stats` - 대시보드 통계
   - `GET /api/dashboard/recent-evaluations` - 최근 평가
   - `GET /api/dashboard/award-status` - 어워즈 현황

### 1.2 프론트엔드 페이지 현황

#### ✅ 구현 완료된 페이지

- `/` - 메인 페이지 (기본 링크만)
- `/analysts` - 애널리스트 목록 (기본 테이블)
- `/awards` - 어워즈 목록 (기본 테이블)

#### ❌ 누락된 페이지

1. **대시보드**
   - `/dashboard` - 대시보드 (통계, 차트)

2. **리포트 관리**
   - `/reports` - 리포트 목록
   - `/reports/upload` - 리포트 업로드
   - `/reports/[id]` - 리포트 상세

3. **평가 관리**
   - `/evaluations` - 평가 목록
   - `/evaluations/[id]` - 평가 상세
   - `/evaluations/step1` - 1단계: AI 정량 분석
   - `/evaluations/step2` - 2단계: SNS·시장 반응
   - `/evaluations/step3` - 3단계: 전문가 평가

4. **스코어카드**
   - `/scorecards` - 스코어카드 목록
   - `/scorecards/[id]` - 스코어카드 상세
   - `/scorecards/ranking` - 랭킹

5. **데이터 수집**
   - `/data-collection` - 데이터 수집 관리

6. **애널리스트 상세**
   - `/analysts/[id]` - 애널리스트 상세

7. **기업 관리**
   - `/companies` - 기업 목록
   - `/companies/[id]` - 기업 상세

### 1.3 데이터베이스 모델 정합성

#### ✅ 완료된 모델 (15개)

1. Analyst - 애널리스트
2. Company - 기업
3. Market - 시장/산업
4. Report - 리포트
5. ReportSection - 리포트 섹션
6. ExtractedText - 추출된 텍스트
7. ExtractedTable - 추출된 표
8. ExtractedImage - 추출된 이미지
9. Prediction - 예측
10. ActualResult - 실제 결과
11. Evaluation - 평가
12. EvaluationScore - 평가 점수
13. Scorecard - 스코어카드
14. Award - 어워즈
15. DataSource - 데이터 소스
16. DataCollectionLog - 데이터 수집 로그
17. EvaluationReport - 평가 보고서
18. PromptTemplate - 프롬프트 템플릿

#### 정합성 체크 결과

✅ **모델 ↔ API**: 대부분 일치
- Analysts API ↔ Analyst 모델 ✅
- Reports API ↔ Report 모델 ✅
- Companies API ↔ Company 모델 ✅
- Evaluations API ↔ Evaluation 모델 ✅
- Awards API ↔ Award 모델 ✅

⚠️ **부분 불일치**
- Reports API에 ExtractedText/Table/Image 조회 API 없음
- Evaluations API에 EvaluationScore 조회 API 없음

### 1.4 스키마 정합성

#### ✅ 완료된 스키마

- AnalystResponse, AnalystCreate
- ReportUploadResponse, ExtractionStatusResponse
- CompanyResponse
- EvaluationResponse
- ScorecardResponse
- AwardResponse
- DataCollectionStartRequest, DataCollectionStatusResponse
- EvaluationReportGenerateResponse, EvaluationReportResponse

#### ❌ 누락된 스키마

1. **Reports**
   - ReportListResponse
   - ReportDetailResponse
   - ReportUpdateRequest

2. **Evaluations**
   - EvaluationListResponse
   - EvaluationDetailResponse
   - EvaluationScoreResponse

3. **Scorecards**
   - ScorecardDetailResponse
   - ScorecardRankingResponse

4. **Dashboard**
   - DashboardStatsResponse
   - RecentEvaluationsResponse

## 2. FnGuide.com 디자인 분석

### 2.1 디자인 특징

1. **색상 팔레트**
   - 주색상: 파란색 (#0066CC, #0052A3)
   - 보조색상: 회색 (#666666, #999999)
   - 배경: 흰색 (#FFFFFF)
   - 강조색: 주황색 (#FF6600)

2. **레이아웃**
   - 상단 고정 네비게이션 바
   - 좌측 사이드바 (선택적)
   - 메인 콘텐츠 영역
   - 카드형 UI 컴포넌트

3. **타이포그래피**
   - 제목: 굵은 폰트, 큰 크기
   - 본문: 가독성 높은 폰트
   - 테이블: 명확한 구분선

4. **UI 컴포넌트**
   - 버튼: 둥근 모서리, 그림자
   - 카드: 그림자, 호버 효과
   - 테이블: 스트라이프, 정렬 가능
   - 폼: 명확한 라벨, 검증 메시지

## 3. 정합성 테스트 결과

### 3.1 메뉴 → 페이지 매핑

| 메뉴 | 페이지 경로 | 구현 상태 | API 연결 |
|------|------------|----------|---------|
| 대시보드 | /dashboard | ❌ | ❌ |
| 애널리스트 | /analysts | ✅ | ✅ |
| 애널리스트 상세 | /analysts/[id] | ❌ | ✅ |
| 리포트 목록 | /reports | ❌ | ❌ |
| 리포트 업로드 | /reports/upload | ❌ | ✅ |
| 리포트 상세 | /reports/[id] | ❌ | ❌ |
| 평가 목록 | /evaluations | ❌ | ❌ |
| 평가 상세 | /evaluations/[id] | ❌ | ❌ |
| 스코어카드 | /scorecards | ❌ | ✅ |
| 어워즈 | /awards | ✅ | ✅ |
| 데이터 수집 | /data-collection | ❌ | ✅ |

### 3.2 페이지 → API 매핑

| 페이지 | 필요한 API | 구현 상태 | 우선순위 |
|--------|-----------|----------|---------|
| /dashboard | GET /api/dashboard/stats | ❌ | 높음 |
| /analysts | GET /api/analysts | ✅ | - |
| /analysts/[id] | GET /api/analysts/{id} | ✅ | 중간 |
| /reports | GET /api/reports | ❌ | 높음 |
| /reports/upload | POST /api/reports/upload | ✅ | - |
| /reports/[id] | GET /api/reports/{id} | ❌ | 높음 |
| /evaluations | GET /api/evaluations | ❌ | 높음 |
| /evaluations/[id] | GET /api/evaluations/{id} | ❌ | 높음 |
| /scorecards | GET /api/scorecards | ✅ | - |
| /scorecards/ranking | GET /api/scorecards/ranking | ❌ | 중간 |
| /awards | GET /api/awards | ✅ | - |

### 3.3 API → 스키마 매핑

| API | Request Schema | Response Schema | 구현 상태 |
|-----|---------------|----------------|----------|
| GET /api/analysts | - | AnalystResponse[] | ✅ |
| GET /api/analysts/{id} | - | AnalystResponse | ✅ |
| POST /api/analysts | AnalystCreate | AnalystResponse | ✅ |
| GET /api/reports | - | ReportListResponse | ❌ |
| POST /api/reports/upload | FormData | ReportUploadResponse | ✅ |
| GET /api/reports/{id} | - | ReportDetailResponse | ❌ |
| GET /api/evaluations | - | EvaluationListResponse | ❌ |
| POST /api/evaluations/start | EvaluationStartRequest | EvaluationResponse | ✅ |
| GET /api/evaluations/{id} | - | EvaluationDetailResponse | ❌ |
| GET /api/scorecards | - | ScorecardResponse[] | ✅ |
| GET /api/scorecards/ranking | - | ScorecardRankingResponse | ❌ |
| GET /api/awards | - | AwardResponse[] | ✅ |

### 3.4 스키마 → 모델 매핑

| Schema | Model | 필드 매핑 | 완성도 |
|--------|-------|----------|--------|
| AnalystResponse | Analyst | ✅ 완전 | 100% |
| ReportUploadResponse | Report | ✅ 완전 | 100% |
| CompanyResponse | Company | ✅ 완전 | 100% |
| EvaluationResponse | Evaluation | ⚠️ 부분 | 70% |
| ScorecardResponse | Scorecard | ✅ 완전 | 100% |
| AwardResponse | Award | ✅ 완전 | 100% |

## 4. 코딩 완성도 분석

### 4.1 백엔드 완성도: 65%

**완료된 부분:**
- ✅ 기본 API 구조 (9개 라우터)
- ✅ 데이터베이스 모델 (15개)
- ✅ 기본 스키마 (9개)
- ✅ 서비스 레이어 (7개)
- ✅ AI 에이전트 (11개)
- ✅ Celery 작업 (4개)

**미완성 부분:**
- ❌ 리포트 목록/상세 API
- ❌ 평가 목록/상세 API
- ❌ 대시보드 API
- ❌ 랭킹 API
- ❌ 일부 스키마 누락
- ❌ 에러 처리 개선 필요
- ❌ 인증/권한 시스템

### 4.2 프론트엔드 완성도: 40% (업데이트)

**완료된 부분:**
- ✅ 기본 프로젝트 구조
- ✅ FnGuide 스타일 시스템 (색상, 타이포그래피, 컴포넌트)
- ✅ 공통 컴포넌트 (Button, Card, Table, Navbar, Layout)
- ✅ 메인 페이지 (FnGuide 스타일)
- ✅ 대시보드 페이지 (기본 구조)
- ✅ 애널리스트 목록 (FnGuide 스타일 테이블)
- ✅ 어워즈 목록 (FnGuide 스타일 테이블)

**미완성 부분:**
- ❌ 리포트 관리 페이지
- ❌ 평가 관리 페이지
- ❌ 스코어카드 페이지
- ❌ 상세 페이지들 (애널리스트, 리포트, 평가)
- ❌ 리포트 업로드 페이지
- ❌ 상태 관리 (React Query 통합)
- ❌ 폼 검증
- ❌ 차트/시각화 (Recharts 통합)
- ❌ 필터링 및 검색 기능

## 5. 추가 개발 계획

### Phase 1: 백엔드 API 완성 (2주)

#### 1.1 누락된 API 구현

**Reports API 확장**
- [ ] `GET /api/reports` - 목록 조회 (필터링, 페이징)
- [ ] `GET /api/reports/{id}` - 상세 조회
- [ ] `DELETE /api/reports/{id}` - 삭제

**Evaluations API 확장**
- [ ] `GET /api/evaluations` - 목록 조회
- [ ] `GET /api/evaluations/{id}` - 상세 조회
- [ ] `GET /api/evaluations/{id}/scores` - 점수 조회

**Scorecards API 확장**
- [ ] `GET /api/scorecards/{id}` - 상세 조회
- [ ] `GET /api/scorecards/ranking` - 랭킹 조회

**Dashboard API**
- [ ] `GET /api/dashboard/stats` - 통계
- [ ] `GET /api/dashboard/recent-evaluations` - 최근 평가
- [ ] `GET /api/dashboard/award-status` - 어워즈 현황

#### 1.2 스키마 추가

- [ ] ReportListResponse
- [ ] ReportDetailResponse
- [ ] EvaluationListResponse
- [ ] EvaluationDetailResponse
- [ ] EvaluationScoreResponse
- [ ] ScorecardDetailResponse
- [ ] ScorecardRankingResponse
- [ ] DashboardStatsResponse

### Phase 2: FnGuide 스타일 UI 컴포넌트 (1주)

#### 2.1 공통 컴포넌트

- [ ] Layout (네비게이션 바, 사이드바)
- [ ] Button (FnGuide 스타일)
- [ ] Card (FnGuide 스타일)
- [ ] Table (FnGuide 스타일)
- [ ] Form (FnGuide 스타일)
- [ ] Modal
- [ ] Loading
- [ ] Toast

#### 2.2 스타일 시스템

- [ ] FnGuide 색상 팔레트
- [ ] 타이포그래피 시스템
- [ ] 간격 시스템
- [ ] 그림자 시스템

### Phase 3: 프론트엔드 페이지 구현 (3주)

#### 3.1 대시보드 (Week 1)

- [ ] `/dashboard` - 메인 대시보드
  - 통계 카드 (전체 리포트, 평가, 어워즈)
  - 최근 평가 차트
  - 어워즈 현황 차트
  - 최근 활동 로그

#### 3.2 리포트 관리 (Week 1-2)

- [ ] `/reports` - 리포트 목록
  - 필터링 (애널리스트, 기업, 기간)
  - 검색
  - 테이블 뷰
- [ ] `/reports/upload` - 리포트 업로드
  - 드래그 앤 드롭
  - 진행 상황 표시
- [ ] `/reports/[id]` - 리포트 상세
  - 리포트 정보
  - 추출된 텍스트/표/이미지
  - 예측 정보

#### 3.3 평가 관리 (Week 2)

- [ ] `/evaluations` - 평가 목록
  - 필터링, 검색
  - 상태별 필터
- [ ] `/evaluations/[id]` - 평가 상세
  - 3단계 평가 결과
  - 점수 시각화 (레이더 차트)
  - 상세 점수 테이블
- [ ] `/evaluations/step1` - 1단계 상세
- [ ] `/evaluations/step2` - 2단계 상세
- [ ] `/evaluations/step3` - 3단계 상세

#### 3.4 스코어카드 및 랭킹 (Week 2-3)

- [ ] `/scorecards` - 스코어카드 목록
- [ ] `/scorecards/[id]` - 스코어카드 상세
- [ ] `/scorecards/ranking` - 랭킹
  - 전체/섹터별/기간별 필터
  - 차트 시각화

#### 3.5 애널리스트 및 기업 (Week 3)

- [ ] `/analysts/[id]` - 애널리스트 상세
  - 프로필
  - 리포트 목록
  - 평가 히스토리
  - 성과 차트
- [ ] `/companies` - 기업 목록
- [ ] `/companies/[id]` - 기업 상세
  - 기업 정보
  - 애널리스트 커버리지
  - 리포트 목록

#### 3.6 데이터 수집 (Week 3)

- [ ] `/data-collection` - 데이터 수집 관리
  - 수집 작업 목록
  - 상태 모니터링
  - 로그 조회

### Phase 4: 통합 및 테스트 (1주)

- [ ] API 연동 테스트
- [ ] UI/UX 테스트
- [ ] 성능 최적화
- [ ] 에러 처리 개선
- [ ] 접근성 개선

## 6. 우선순위

### 높음 (즉시 필요)
1. 백엔드 누락 API 구현
2. FnGuide 스타일 컴포넌트
3. 대시보드 페이지
4. 리포트 관리 페이지

### 중간 (1-2주 내)
5. 평가 관리 페이지
6. 스코어카드 및 랭킹
7. 상세 페이지들

### 낮음 (2-3주 내)
8. 데이터 수집 UI
9. 고급 필터링
10. 차트 시각화 고도화

## 7. 예상 개발 기간

- **Phase 1 (백엔드)**: 2주
- **Phase 2 (UI 컴포넌트)**: 1주
- **Phase 3 (페이지 구현)**: 3주
- **Phase 4 (통합/테스트)**: 1주

**총 예상 기간: 7주**

