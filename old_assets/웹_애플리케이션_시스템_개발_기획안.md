# 사람 애널리스트 예측 및 실적평가용 웹 애플리케이션 시스템 개발 기획안

## 1. 시스템 개요

### 1.1 프로젝트명
**AI가 찾은 스타 애널리스트** 어워즈 시스템

### 1.2 목적
인공지능(AI)이 직접 빅데이터를 분석해 대한민국 최고의 애널리스트를 선정하는 새로운 개념의 어워즈 시스템 구축. 증권사 애널리스트의 보고서를 업로드하고, 3단계 심사 프로세스(1단계: AI 정량 분석, 2단계: SNS·시장 반응 분석, 3단계: 전문가 평가 및 설문)를 통해 자동으로 평가 및 scoring을 수행하여 award를 선정하는 웹 애플리케이션 시스템

### 1.3 핵심 기능
- 애널리스트 보고서 업로드 및 관리
- 1단계: AI 정량 분석 (Mix of Agents 기반)
- 2단계: SNS·시장 반응 분석
- 3단계: 전문가 평가 및 설문 관리
- 3단계 통합 Scoring 및 Ranking
- Award 선정 및 시각화

## 2. 시스템 아키텍처

### 2.1 전체 구조

```
┌─────────────────────────────────────────────────────────────┐
│                   Frontend (React/Next.js)                   │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐     │
│  │  보고서 업로드 │  │  평가 결과 조회 │  │  Award 대시보드 │  │
│  └──────────────┘  └──────────────┘  └──────────────┘     │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐     │
│  │  애널리스트 관리│  │  Ranking 뷰  │  │  리포트 생성  │     │
│  └──────────────┘  └──────────────┘  └──────────────┘     │
└──────────────────────────┬──────────────────────────────────┘
                           │ HTTP/REST API
┌──────────────────────────┴──────────────────────────────────┐
│              Backend API (FastAPI/Django)                    │
│  ┌────────────────────────────────────────────────────────┐ │
│  │  API Endpoints                                         │ │
│  │  - /api/reports (POST, GET, PUT, DELETE)              │ │
│  │  - /api/evaluations (POST, GET)                       │ │
│  │  - /api/sns-analysis (GET, POST)                      │ │
│  │  - /api/surveys (GET, POST)                           │ │
│  │  - /api/scores (GET)                                  │ │
│  │  - /api/awards (GET)                                  │ │
│  │  - /api/analysts (GET, POST)                          │ │
│  └────────────────────────────────────────────────────────┘ │
│  ┌────────────────────────────────────────────────────────┐ │
│  │  비즈니스 로직 레이어                                  │ │
│  │  - 보고서 파싱 서비스                                   │ │
│  │  - 1단계: AI 정량 분석 프로세스 오케스트레이션           │ │
│  │  - 2단계: SNS·시장 반응 분석 서비스                     │ │
│  │  - 3단계: 전문가 평가 및 설문 관리 서비스                │ │
│  │  - 3단계 통합 Scoring 서비스                           │ │
│  │  - Award 선정 서비스                                   │ │
│  └────────────────────────────────────────────────────────┘ │
└──────────────────────────┬──────────────────────────────────┘
                           │
┌──────────────────────────┴──────────────────────────────────┐
│         AI Agent Orchestration Layer                        │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐   │
│  │ OpenAI   │  │ Claude   │  │ Gemini   │  │Perplexity│   │
│  │ Agent    │  │ Agent    │  │ Agent    │  │ Agent    │   │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘   │
│                                                              │
│         Mix of Agents 추론 알고리즘                          │
└──────────────────────────┬──────────────────────────────────┘
                           │
┌──────────────────────────┴──────────────────────────────────┐
│              데이터 레이어                                    │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐     │
│  │  PostgreSQL  │  │  Vector DB    │  │  Redis Cache  │     │
│  │  (메타데이터) │  │  (임베딩)     │  │  (캐싱)       │     │
│  └──────────────┘  └──────────────┘  └──────────────┘     │
└──────────────────────────────────────────────────────────────┘
```

### 2.2 기술 스택

#### Frontend
- **Framework**: Next.js 14 (React 18)
- **UI Library**: Material-UI / Tailwind CSS
- **상태 관리**: Zustand / Redux Toolkit
- **데이터 페칭**: React Query / SWR
- **차트 라이브러리**: Chart.js / Recharts
- **파일 업로드**: react-dropzone

#### Backend
- **Framework**: FastAPI (Python 3.11+)
- **ORM**: SQLAlchemy
- **비동기 처리**: Celery + Redis
- **API 문서**: Swagger/OpenAPI
- **인증**: JWT

#### AI/ML
- **OpenAI API**: GPT-4
- **Anthropic API**: Claude 3.5 Sonnet
- **Google API**: Gemini Pro
- **Perplexity API**: Search API

#### Database
- **PostgreSQL**: 메인 데이터베이스
- **Vector DB**: Pinecone / Weaviate (보고서 임베딩)
- **Redis**: 캐싱 및 큐

#### 인프라
- **컨테이너**: Docker
- **배포**: Kubernetes / AWS ECS
- **모니터링**: Prometheus + Grafana

## 3. 데이터베이스 설계

### 3.1 ERD

```
analysts (애널리스트)
├── id (PK)
├── name
├── securities_firm
├── email
├── created_at
└── updated_at

reports (보고서)
├── id (PK)
├── analyst_id (FK -> analysts.id)
├── company_name
├── report_date
├── file_path
├── file_type
├── status (pending, processing, completed, failed)
├── created_at
└── updated_at

predictions (예측 항목)
├── id (PK)
├── report_id (FK -> reports.id)
├── prediction_type (revenue, operating_profit, net_profit, target_price, opinion)
├── predicted_value
├── unit
├── period
├── reasoning
├── created_at
└── updated_at

actual_results (실제 실적)
├── id (PK)
├── prediction_id (FK -> predictions.id)
├── actual_value
├── source
├── source_url
├── reliability
├── collected_at
└── created_at

evaluations (평가 결과)
├── id (PK)
├── report_id (FK -> reports.id)
├── final_score
├── accuracy_score
├── reasoning_quality_score
├── timeliness_score
├── impact_score
├── status
├── evaluated_at
└── created_at

scores (세부 점수)
├── id (PK)
├── evaluation_id (FK -> evaluations.id)
├── prediction_id (FK -> predictions.id)
├── score_type
├── score_value
├── details
└── created_at

awards (수상 내역)
├── id (PK)
├── evaluation_id (FK -> evaluations.id)
├── analyst_id (FK -> analysts.id)
├── award_type
├── award_category
├── period
├── rank
└── created_at
```

## 4. API 설계

### 4.1 보고서 관리 API

#### POST /api/reports
보고서 업로드 및 평가 시작

**Request**:
```json
{
  "analyst_id": 1,
  "company_name": "삼성전자",
  "report_date": "2024-01-15",
  "file": "<file>"
}
```

**Response**:
```json
{
  "report_id": 123,
  "status": "processing",
  "message": "보고서 업로드 및 평가 시작됨"
}
```

#### GET /api/reports
보고서 목록 조회

**Query Parameters**:
- `analyst_id`: 애널리스트 ID (optional)
- `company_name`: 기업명 (optional)
- `status`: 상태 (optional)
- `page`: 페이지 번호
- `limit`: 페이지당 개수

**Response**:
```json
{
  "reports": [
    {
      "id": 123,
      "analyst_name": "홍길동",
      "securities_firm": "삼성증권",
      "company_name": "삼성전자",
      "report_date": "2024-01-15",
      "status": "completed",
      "final_score": 85.5,
      "created_at": "2024-01-16T10:00:00Z"
    }
  ],
  "total": 100,
  "page": 1,
  "limit": 20
}
```

#### GET /api/reports/{report_id}
보고서 상세 조회

**Response**:
```json
{
  "id": 123,
  "analyst": {
    "id": 1,
    "name": "홍길동",
    "securities_firm": "삼성증권"
  },
  "company_name": "삼성전자",
  "report_date": "2024-01-15",
  "status": "completed",
  "predictions": [
    {
      "id": 456,
      "type": "revenue",
      "predicted_value": 1000000,
      "actual_value": 950000,
      "accuracy_score": 0.95
    }
  ],
  "evaluation": {
    "final_score": 85.5,
    "accuracy_score": 90.0,
    "reasoning_quality_score": 85.0,
    "timeliness_score": 80.0,
    "impact_score": 75.0
  },
  "created_at": "2024-01-16T10:00:00Z"
}
```

### 4.2 평가 API

#### POST /api/evaluations
평가 프로세스 시작 (수동 트리거)

**Request**:
```json
{
  "report_id": 123
}
```

**Response**:
```json
{
  "evaluation_id": 789,
  "status": "processing",
  "message": "평가 프로세스 시작됨"
}
```

#### GET /api/evaluations/{evaluation_id}
평가 결과 조회

**Response**:
```json
{
  "id": 789,
  "report_id": 123,
  "final_score": 85.5,
  "accuracy_score": 90.0,
  "reasoning_quality_score": 85.0,
  "timeliness_score": 80.0,
  "impact_score": 75.0,
  "scores": [
    {
      "prediction_type": "revenue",
      "score_value": 0.95,
      "details": "매출액 예측 정확도: 95%"
    }
  ],
  "evaluated_at": "2024-01-16T10:30:00Z"
}
```

### 4.3 Scoring API

#### GET /api/scores
Scoring 데이터 조회

**Query Parameters**:
- `analyst_id`: 애널리스트 ID (optional)
- `company_name`: 기업명 (optional)
- `period`: 기간 (optional)
- `category`: 카테고리 (optional)

**Response**:
```json
{
  "scores": [
    {
      "analyst_id": 1,
      "analyst_name": "홍길동",
      "securities_firm": "삼성증권",
      "final_score": 85.5,
      "accuracy_score": 90.0,
      "reasoning_quality_score": 85.0,
      "report_count": 10
    }
  ],
  "total": 50
}
```

### 4.4 Award API

#### GET /api/awards
Award 목록 조회

**Query Parameters**:
- `period`: 기간 (monthly, quarterly, yearly)
- `category`: 카테고리 (industry, experience)
- `year`: 연도
- `quarter`: 분기 (optional)

**Response**:
```json
{
  "awards": [
    {
      "id": 1,
      "analyst_name": "홍길동",
      "securities_firm": "삼성증권",
      "award_type": "gold",
      "award_category": "반도체",
      "period": "2024-Q1",
      "rank": 1,
      "final_score": 92.5,
      "created_at": "2024-04-01T00:00:00Z"
    }
  ],
  "period": "2024-Q1",
  "total": 10
}
```

### 4.5 애널리스트 API

#### GET /api/analysts
애널리스트 목록 조회

**Response**:
```json
{
  "analysts": [
    {
      "id": 1,
      "name": "홍길동",
      "securities_firm": "삼성증권",
      "total_reports": 50,
      "average_score": 85.5,
      "award_count": 5
    }
  ],
  "total": 100
}
```

## 5. 프론트엔드 페이지 구조

### 5.1 페이지 구성

```
/
├── /dashboard (대시보드)
│   ├── 전체 통계
│   ├── 최근 평가 결과
│   └── Award 현황
│
├── /reports (보고서 관리)
│   ├── /upload (보고서 업로드)
│   ├── /list (보고서 목록)
│   └── /[id] (보고서 상세)
│
├── /evaluations (평가 결과)
│   ├── /list (평가 결과 목록)
│   ├── /[id] (평가 결과 상세)
│   ├── /step1 (1단계: AI 정량 분석)
│   ├── /step2 (2단계: SNS·시장 반응 분석)
│   └── /step3 (3단계: 전문가 평가 및 설문)
│
├── /sns-analysis (SNS·시장 반응 분석)
│   ├── /dashboard (SNS 분석 대시보드)
│   └── /reports (SNS 분석 리포트)
│
├── /surveys (설문 관리)
│   ├── /institutional (운용사/리서치센터 설문)
│   └── /retail (리테일 투자자 설문)
│
├── /ranking (랭킹)
│   ├── 전체 랭킹
│   ├── 산업별 랭킹
│   └── 기간별 랭킹
│
├── /awards (Award)
│   ├── /list (Award 목록)
│   └── /[id] (Award 상세)
│
├── /analysts (애널리스트)
│   ├── /list (애널리스트 목록)
│   └── /[id] (애널리스트 상세)
│
└── /settings (설정)
    ├── 시스템 설정
    └── 사용자 관리
```

### 5.2 주요 컴포넌트

#### 대시보드 컴포넌트
- 통계 카드 (전체 보고서 수, 평균 점수, Award 수)
- 최근 평가 결과 차트
- Award 현황 차트

#### 보고서 업로드 컴포넌트
- 파일 드래그 앤 드롭
- 진행 상황 표시
- 업로드 결과 표시

#### 평가 결과 상세 컴포넌트
- 점수 시각화 (레이더 차트)
- 예측 vs 실제 비교 차트
- 근거 분석 텍스트
- 세부 점수 테이블

#### 랭킹 컴포넌트
- 랭킹 테이블
- 필터링 (기간, 산업, 애널리스트)
- 차트 시각화

## 6. 개발 단계

### Phase 1: 기초 인프라 구축 (4주)
**목표**: 기본 프로젝트 구조 및 개발 환경 구축

**작업 내용**:
- 프로젝트 초기 설정 (Frontend, Backend)
- 데이터베이스 설계 및 구축
- 기본 API 엔드포인트 구현
- 인증 시스템 구현

**산출물**:
- 프로젝트 구조
- 데이터베이스 스키마
- 기본 API 문서

### Phase 2: AI Agent 개발 (6주)
**목표**: Mix of Agents 시스템 구축

**작업 내용**:
- 각 AI 에이전트 개별 개발
- Agent 오케스트레이션 레이어
- 추론 알고리즘 구현
- 에러 핸들링 및 재시도 로직

**산출물**:
- Agent 구현 코드
- 오케스트레이션 레이어
- 추론 알고리즘 문서

### Phase 3: 데이터 수집 시스템 (4주)
**목표**: 외부 데이터 수집 및 검증 시스템 구축

**작업 내용**:
- 외부 데이터 소스 연동 (DART, 금융감독원 등)
- 웹 스크래핑 모듈
- 데이터 검증 및 정제 파이프라인
- 데이터 캐싱 시스템

**산출물**:
- 데이터 수집 모듈
- 검증 파이프라인
- 데이터 캐싱 시스템

### Phase 4: Scoring 시스템 (4주)
**목표**: KPI 기반 Scoring 시스템 구현

**작업 내용**:
- KPI 기반 Scoring 알고리즘 구현
- 평가 프로세스 자동화
- 결과 저장 및 조회 API
- 배치 처리 시스템

**산출물**:
- Scoring 알고리즘
- 평가 프로세스
- 배치 처리 시스템

### Phase 5: 프론트엔드 개발 (6주)
**목표**: 사용자 인터페이스 및 대시보드 구현

**작업 내용**:
- 페이지 레이아웃 구현
- 보고서 업로드 기능
- 평가 결과 시각화
- Ranking 및 Award 페이지
- 반응형 디자인

**산출물**:
- 완성된 프론트엔드
- UI/UX 디자인
- 시각화 차트

### Phase 6: 통합 및 테스트 (4주)
**목표**: 전체 시스템 통합 및 테스트

**작업 내용**:
- 시스템 통합 테스트
- 성능 최적화
- 보안 검증
- 사용자 피드백 반영

**산출물**:
- 통합된 시스템
- 테스트 보고서
- 성능 최적화 보고서

**총 개발 기간: 약 28주 (7개월)**

## 7. 보안 및 프라이버시

### 7.1 인증 및 권한
- JWT 기반 인증
- 역할 기반 접근 제어 (RBAC)
- API 키 관리

### 7.2 데이터 보호
- 보고서 파일 암호화 저장
- 개인정보 암호화
- 데이터베이스 접근 제어

### 7.3 API 보안
- Rate Limiting
- CORS 설정
- 입력 검증 및 Sanitization

## 8. 모니터링 및 로깅

### 8.1 모니터링
- 시스템 리소스 모니터링
- API 응답 시간 추적
- AI API 비용 추적
- 에러 발생 알림

### 8.2 로깅
- 애플리케이션 로그
- API 호출 로그
- AI Agent 호출 로그
- 에러 로그

## 9. 배포 및 운영

### 9.1 배포 전략
- Docker 컨테이너화
- CI/CD 파이프라인 구축
- 스테이징 환경 운영
- 점진적 배포

### 9.2 운영 관리
- 백업 및 복구 계획
- 확장성 고려 (수평 확장)
- 장애 대응 계획
- 성능 튜닝

## 10. 향후 확장 계획

- 실시간 평가 시스템
- 예측 모델 학습 및 개선
- 산업별 특화 평가 모델
- 글로벌 증권사 확장
- 모바일 앱 개발
- API 공개 (외부 서비스 연동)

